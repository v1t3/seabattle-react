{"version":3,"sources":["components/Ship.jsx","components/PlaceShips.jsx","components/Field/index.jsx","components/Controller.jsx","components/StartGame.jsx","components/Rules.jsx","components/PopupName.jsx","components/App.jsx","index.jsx"],"names":["Ship","state","shipMatrix","hits","decks","props","x","y","createShip","this","dir","player","k","matrix","push","flot","showShip","length","document","querySelector","setAttribute","err","console","error","shipname","shipSize","div","createElement","dir_v","classname","slice","className","style","cssText","field","appendChild","Component","PlaceShips","getCoordinatesDecks","getRandom","checkLocationShip","toX","fromY","toY","i","j","cleanField","parent","id","getAttribute","divs","querySelectorAll","el","removeChild","randomClick","setUserfield","randomLocationShips","setState","createMatrix","shipsData","fieldCoord","String","ship","user","setAppState","arr","n","Math","floor","random","start","undefined","gameStarted","btnPlaceShips","playerNum","data-target","data-hidden","onClick","Field","userfield","bind","playerName","fieldSize","fieldX","fieldY","fieldRight","fieldBtm","getBoundingClientRect","top","window","pageYOffset","left","pageXOffset","setUserPos","prevProps","self","Controller","showIcons","enemy","coords","iconClass","fname","setShootMatrix","compShootMatrix","compStartPoints","lh","compShootMatrixAI","compareRandom","a","b","sort","getCoordinatesShot","compShootMatrixAround","coordsState","pop","obj","deleteElementMatrix","array","splice","resetTempShip","prevState","compTempShip","totalHits","firstHit","nextHit","dirx","diry","checkMaxDecks","flotUser1","max","apply","markEmptyCell","points","matrixUser1","transformCoordinates","e","trunc","pageY","fieldXUser2","pageX","fieldYUser2","matrixUser2","flotUser2","curPlayer","curEnemy","setGameStarted","rnd","userNum","enemyNum","addEventListener","shoot","showServiseText","setTimeout","userfield2","matrixEnemy","flotEnemy","val","text","curPlayerName","curEnemyName","warship","arrayDescks","x0","y0","removeEventListener","field2","firstChild","x1","y1","x2","y2","setShootMatrixAround","Object","keys","tempShipFirstHit","tempShipNextHit","tempShipDirx","tempShipDiry","abs","getElementById","innerHTML","init","React","StartGame","playClick","controlBtns","setStart","Rules","PopupName","value","handleChange","handleSubmit","event","preventDefault","target","action","onSubmit","type","placeholder","onChange","App","user1name","user1id","user1playerName","user1matrix","user1fieldX","user1fieldY","user1fieldRight","user1fieldBtm","user1flot","user2name","user2id","user2playerName","user2matrix","user2fieldX","user2fieldY","user2fieldRight","user2fieldBtm","user2flot","username","param","data","userState","render"],"mappings":"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","file":"static/js/main.6598bb14.chunk.js","sourcesContent":["import React, {Component} from 'react'\r\n\r\nexport default class Ship extends Component {  \r\n  state = {\r\n    shipMatrix: [],\r\n    hits: 0,\r\n    decks: this.props.decks,\r\n    x: this.props.x,\r\n    y: this.props.y,\r\n  }\r\n\t\t\r\n\tcreateShip = function() {\r\n    try {\r\n      const {dir, decks, x, y, player} = this.props;\r\n      let k = 0;\r\n          \r\n      // количество циклов будет равно количеству палуб создаваемого корабля\r\n      while (k < decks) {\r\n      \t// записываем координаты корабля в матрицу игрового поля\r\n      \tthis.props.matrix[x + k * dir][y + k * !dir] = 1;\r\n      \t// записываем координаты корабля в матрицу экземпляра корабля\r\n      \tthis.state.shipMatrix.push([x + k * dir, y + k * !dir]);\r\n    \r\n      \tk++;\r\n      }\r\n\r\n      // заносим информацию о созданном корабле в массив флот\r\n      this.props.flot.push(this);\r\n\r\n      // если корабль создан для игрока, выводим его на экран\r\n      if (player === 'user1') this.showShip();\r\n\r\n      // когда созданы все корабли (10 шт), показываем кнопку запуска игры\r\n      if (this.props.flot.length === 10 && player === 'user1') {\r\n      \tdocument.querySelector('.start-btn').setAttribute('data-hidden', 'false');\r\n      \tdocument.querySelector('#play').setAttribute('data-hidden', 'false');\r\n      }\r\n    } catch(err) {\r\n      console.error(err);\r\n    }\r\n\t}\r\n\r\n\tshowShip = function() {\r\n    try {\r\n      let {dir, shipname, x, y, shipSize} = this.props;\r\n      let div = document.createElement('div'),\r\n          dir_v = (dir === 1) ? ' vertical' : '',\r\n          classname\t= shipname.slice(0, -1);\r\n          \r\n\r\n      div.setAttribute('id', shipname);\r\n      div.className = 'ship ' + classname + dir_v;\r\n      // задаём позиционирование кораблю\r\n      div.style.cssText = `left: ${y * shipSize}px; \r\n                           top: ${x * shipSize}px;`;\r\n\r\n      this.props.field.appendChild(div);\r\n    } catch(err) {\r\n      console.error(err);\r\n    }\r\n\t}\r\n\r\n  render() {\r\n    return <></>;\r\n  }\r\n}","import React, {Component} from 'react'\r\nimport Ship from './Ship' \r\n\r\nexport default class PlaceShips extends Component {\r\n  state = {\r\n    matrix: []\r\n  }\r\n\r\n\tasync randomLocationShips() {\r\n    try {\r\n      // заполняем базу нулями\r\n\t\t\tawait this.setState({matrix: this.createMatrix()});\r\n    \r\n      let length = this.props.shipsData.length;\r\n      let decks;\r\n      let fieldCoord;\r\n\r\n      for (let i = 1; i < length; i++) {\r\n        decks = this.props.shipsData[i][0];\r\n    \r\n        for (let j = 0; j < i; j++) {\r\n          fieldCoord = this.getCoordinatesDecks(decks);\r\n          fieldCoord.decks = decks;\r\n          fieldCoord.shipname\t= this.props.shipsData[i][1] + String(j + 1);\r\n    \r\n          let ship = new Ship({\r\n            x: fieldCoord.x,\r\n            y: fieldCoord.y,\r\n            dir: fieldCoord.dir,\r\n            decks, \r\n            player: this.props.user,\r\n            field: this.props.field,\r\n            shipname: fieldCoord.shipname,\r\n            shipSize: this.props.shipSize,\r\n            flot: this.props.flot,\r\n            matrix: this.state.matrix\r\n          });\r\n          \r\n          ship.createShip();\r\n          ship.showShip();\r\n        }\r\n      }\r\n\r\n      // закинем матрицу кораблей в App\r\n      this.props.setAppState(this.props.user, 'matrix', this.state.matrix);\r\n    } catch(err) {\r\n      console.error(err);\r\n    }\r\n\t}\r\n\r\n\tgetCoordinatesDecks = function(decks) {\r\n    try {\r\n      let x, y, dir = this.getRandom(1);\r\n    \r\n      if (dir === 0) {\r\n      \tx = this.getRandom(9);\r\n      \ty = this.getRandom(10 - decks);\r\n      } else {\r\n      \tx = this.getRandom(10 - decks);\r\n      \ty = this.getRandom(9);\r\n      }\r\n    \r\n      let result = this.checkLocationShip(x, y, dir, decks);\r\n      if (!result) return this.getCoordinatesDecks(decks);\r\n    \r\n      let obj = {\r\n        x: x,\r\n        y: y,\r\n        dir: dir\r\n      };\r\n      return obj;\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n\t}\r\n\r\n\tcheckLocationShip = function(x, y, dir, decks) {\r\n    try {\r\n      let fromX, toX, fromY, toY;\r\n\r\n      fromX = (x === 0) ? x : x - 1;\r\n      fromY = (y === 0) ? y : y - 1;\r\n    \r\n      if (dir === 1) {\r\n      \tif (x + decks === 10) toX = x + decks;\r\n      \telse toX = x + decks + 1;\r\n    \r\n      \tif (y === 9) toY = y + 1;\r\n      \telse toY = y + 2;\r\n      } else {\r\n      \tif (x === 9) toX = x + 1;\r\n      \telse toX = x + 2;\r\n    \r\n      \tif (y + decks === 10) toY = y + decks;\r\n      \telse toY = y + decks + 1;\r\n      }\r\n    \r\n      // make func\r\n      for (let i = fromX; i < toX; i++) {\r\n      \tfor (let j = fromY; j < toY; j++) {\r\n      \t\tif (this.state.matrix[i][j] === 1) return false;\r\n      \t}\r\n      }\r\n\r\n      return true;\r\n    } catch(err) {\r\n      console.error(err);\r\n    }\r\n\t}\r\n\r\n\tcleanField = function() {\r\n    try {\r\n      let parent = this.props.field;\r\n      let id = parent.getAttribute('id');\r\n      // получаем коллекцию все кораблей, которые нужно удалить\r\n      let divs = document.querySelectorAll(`#${id} > div`);\r\n    \r\n      // перебираем в цикле полученную коллекцию и удаляем входящие в неё корабли\r\n      for (let el of divs) {\r\n        parent.removeChild(el);\r\n      }\r\n    \r\n      // очищаем массив объектов кораблей\r\n      this.props.flot.length = 0;\r\n    } catch(err) {\r\n      console.error(err);\r\n    }\r\n  }\r\n  \r\n  createMatrix() {\r\n    try {\r\n      let x = 10, y = 10, arr = [10];\r\n      for (let i = 0; i < x; i++) {\r\n        arr[i] = [10];\r\n        for(let j = 0; j < y; j++) {\r\n          arr[i][j] = 0;\r\n        }\r\n      }\r\n      return arr;\r\n    } catch(err) {\r\n      console.error(err);\r\n    }\r\n  }\r\n  \r\n  getRandom(n) {\r\n    try {\r\n      return Math.floor(Math.random() * (n + 1));\r\n    } catch(err) {\r\n      console.error(err);\r\n    }\r\n  }\r\n\r\n\trandomClick = () => {\r\n    try {\r\n      this.props.setUserfield();\r\n      \r\n      // рандомно расставляем корабли\r\n      this.cleanField();\r\n      this.randomLocationShips();\r\n    } catch(err) {\r\n      console.error(err);\r\n    }\r\n\t}\r\n  \r\n  componentDidUpdate() {\r\n    try {\r\n      const start = this.props.start;\r\n\r\n      if (start !== undefined && start === true && this.props.gameStarted === false) {\r\n        this.cleanField();\r\n        this.randomLocationShips();\r\n      }\r\n    } catch(err) {\r\n      console.error(err);\r\n    }\r\n  }\r\n  \r\n  render() {\r\n    let btnPlaceShips;\r\n    if (this.props.user === 'user1') {\r\n      btnPlaceShips = <span \r\n                        className=\"link-random\" \r\n                        id={'random' + this.props.playerNum} \r\n                        data-target=\"random\" \r\n                        data-hidden=\"false\"\r\n                        onClick={this.randomClick} \r\n                      >Расставить корабли</span>\r\n    } else {\r\n      btnPlaceShips = <></>\r\n    }\r\n    \r\n    return (\r\n      <div id=\"control_btns\" className=\"control-btns\" data-hidden=\"false\">\r\n        {btnPlaceShips}\r\n          \r\n        <div id=\"ships_collection\" className=\"ships-collection\">\r\n          <div id=\"fourdeck1\" className=\"ship fourdeck\"></div>\r\n          <div id=\"tripledeck1\" className=\"ship tripledeck tripledeck1\"></div>\r\n          <div id=\"tripledeck2\" className=\"ship tripledeck tripledeck2\"></div>\r\n          <div id=\"doubledeck1\" className=\"ship doubledeck\"></div>\r\n          <div id=\"doubledeck2\" className=\"ship doubledeck doubledeck2\"></div>\r\n          <div id=\"doubledeck3\" className=\"ship doubledeck doubledeck3\"></div>\r\n          <div id=\"singledeck1\" className=\"ship singledeck\"></div>\r\n          <div id=\"singledeck2\" className=\"ship singledeck singledeck2\"></div>\r\n          <div id=\"singledeck3\" className=\"ship singledeck singledeck3\"></div>\r\n          <div id=\"singledeck4\" className=\"ship singledeck singledeck4\"></div>\r\n        </div>\r\n        \r\n      </div>\r\n    )\r\n  }\r\n}","import React, {Component} from 'react'\r\nimport './style.css'\r\nimport PlaceShips from '../PlaceShips'\r\n\r\nexport default class Field extends Component {\r\n\tconstructor(props) {\r\n    super(props);\r\n\t\tconst {user, playerNum, playerName, fieldSize, shipSize} = this.props;\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tuser: user,\r\n\t\t\tplayerNum: playerNum,\r\n\t\t\tplayerName: playerName,\r\n\t\t\tfieldSize: fieldSize,\r\n\t\t\tshipSize: shipSize,\r\n\t\t\tshipsData: ['',\r\n        [4, 'fourdeck'],\r\n        [3, 'tripledeck'],\r\n        [2, 'doubledeck'],\r\n        [1, 'singledeck']\r\n      ],\r\n\t\t\tfield: null,\r\n\t\t\tfieldX: null,\r\n\t\t\tfieldY: null,\r\n\t\t\tfieldRight: null,\r\n\t\t\tfieldBtm: null\r\n\t\t}\r\n\t}\r\n\r\n\tsetUserfield = function() {\r\n    try {\r\n      let userfield = document.querySelector('#field_user' + this.state.playerNum);\r\n      this.setState({field: userfield});\r\n    } catch(err) {\r\n      console.error(err);\r\n    }\r\n  }.bind(this);\r\n  \r\n  async componentDidMount() {\r\n    try {\r\n      await this.setUserfield();\r\n\r\n      await this.setState({\r\n        fieldX: this.state.field.getBoundingClientRect().top + window.pageYOffset,\r\n        fieldY: this.state.field.getBoundingClientRect().left + window.pageXOffset\r\n      });\r\n\r\n      await this.setState({\r\n        fieldRight: this.state.fieldY + this.state.fieldSize,\r\n        fieldBtm: this.state.fieldX + this.state.fieldSize\r\n      });\r\n\r\n      await this.props.setUserPos(\r\n        'user2',\r\n        this.state.fieldX,\r\n        this.state.fieldY,\r\n        this.state.fieldRight,\r\n        this.state.fieldBtm\r\n      );\r\n\r\n    } catch(err) {\r\n      console.error(err);\r\n    }      \r\n  }\r\n  \r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tif (this.props.playerName !== prevProps.playerName) {\r\n\t\t\tthis.setState({playerName: this.props.playerName});\r\n\t\t}\r\n  }\r\n  \r\n  render() {\r\n    const {user, playerNum, playerName, shipSize, shipsData, field} = this.state;\r\n    return (\r\n      <div className={'bfield bfield' + playerNum}>\r\n          <p className={'btext btext' + playerNum}>\r\n            Игрок {playerNum}: \r\n\t\t\t\t\t\t<span id={'username' + playerNum}> {playerName}</span>\r\n            {/* добавить иконку изменения имени */}\r\n          </p>\r\n        <div className=\"field field-user\">\r\n          <div className=\"top-nums\">\r\n            <div className=\"top-num top-num1\">1</div>\r\n            <div className=\"top-num top-num2\">2</div>\r\n            <div className=\"top-num top-num3\">3</div>\r\n            <div className=\"top-num top-num4\">4</div>\r\n            <div className=\"top-num top-num5\">5</div>\r\n            <div className=\"top-num top-num6\">6</div>\r\n            <div className=\"top-num top-num7\">7</div>\r\n            <div className=\"top-num top-num8\">8</div>\r\n            <div className=\"top-num top-num9\">9</div>\r\n            <div className=\"top-num top-num10\">10</div>\r\n          </div>\r\n          <div className=\"left-nums\">\r\n            <div className=\"left-num left-num1\">А</div>\r\n            <div className=\"left-num left-num2\">Б</div>\r\n            <div className=\"left-num left-num3\">В</div>\r\n            <div className=\"left-num left-num4\">Г</div>\r\n            <div className=\"left-num left-num5\">Д</div>\r\n            <div className=\"left-num left-num6\">Е</div>\r\n            <div className=\"left-num left-num7\">Ж</div>\r\n            <div className=\"left-num left-num8\">З</div>\r\n            <div className=\"left-num left-num9\">И</div>\r\n            <div className=\"left-num left-num10\">К</div>\r\n          </div>\r\n          <div id={'field_user' + playerNum} className=\"ships\"></div>\r\n        </div>\r\n          \r\n        <PlaceShips user={user}\r\n                    playerNum={playerNum}\r\n                    shipSize={shipSize}\r\n                    shipsData={shipsData}\r\n                    field={field}\r\n                    flot={this.props.flot}\r\n                    setUserfield={this.setUserfield}\r\n                    setAppState={this.props.setAppState}\r\n                    start={this.props.start}\r\n                    gameStarted={this.props.gameStarted} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\n\r\nlet self = this;\r\n\r\nexport default class Controller extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tconst {matrixUser1, matrixUser2, flotUser1, flotUser2} = this.props;\r\n\r\n\t\tthis.state = {\r\n\t\t\tmatrixUser1: matrixUser1,\r\n\t\t\tmatrixUser2: matrixUser2,\r\n\t\t\tflotUser1: flotUser1,\r\n\t\t\tflotUser2: flotUser2,\r\n\t\t\tcurPlayer: null,\r\n\t\t\tcurEnemy: null,\r\n\t\t\tcoords: null,\r\n\t\t\tcompShootMatrix: [],\r\n\t\t\tcompShootMatrixAI: [],\r\n\t\t\tcompShootMatrixAround: [],\r\n\t\t\tcompStartPoints: [\r\n\t\t\t\t[ [6,0], [2,0], [0,2], [0,6] ], \r\n\t\t\t\t[ [3,0], [7,0], [9,2], [9,6] ]\r\n\t\t\t],\r\n\t\t\tcompTempShip: {\r\n\t\t\t\ttotalHits: 0,\r\n\t\t\t\tfirstHit: {},\r\n\t\t\t\tnextHit: {},\r\n\t\t\t\tdirx: 0,\r\n\t\t\t\tdiry: 0\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tasync init() {\r\n\t\ttry {\t\t\t\r\n\t\t\t// кидаем флаг, что игра уже запущена\r\n\t\t\tthis.props.setGameStarted();\r\n\r\n\t\t\tself = this;\r\n\t\t\t// рандомно определяем кто будет стрелять первым\r\n\t\t\tlet rnd = this.getRandom(1);\t\t\t\r\n\t\t\tlet userNum = (rnd === 0) ? 'user1' : 'user2';\r\n\t\t\tawait this.setState({curPlayer: userNum});\r\n\r\n\t\t\tlet enemyNum = (this.state.curPlayer === 'user1') ? 'user2' : 'user1';\r\n\t\t\tawait this.setState({curEnemy: enemyNum});\r\n\t\t\t\r\n\t\t\tself.resetTempShip();\r\n\t\t\tself.setShootMatrix();\r\n\r\n      let userfield2 = document.querySelector('#field_user2');\r\n\t\t\tuserfield2.addEventListener('click', self.shoot.bind(this) );\r\n\r\n\t\t\tif (this.state.curPlayer === 'user1') {\r\n\t\t\t\tself.showServiseText('Вы стреляете первым.');\r\n\t\t\t} else {\r\n\t\t\t\tself.showServiseText('Первым стреляет компьютер.');\r\n\t\t\t\t// вызываем функцию выстрела компа\r\n\t\t\t\tsetTimeout( () => self.shoot(), 1000);\r\n\t\t\t}\r\n    } catch(err) {\r\n      console.error(err);\r\n    }\r\n\t}\r\n\r\n\t// обработка выстрела\r\n\tasync shoot(e) {\t\t    \r\n\t\tlet matrixEnemy, coords, text, flotEnemy;\r\n\t\tlet userfield2 = document.querySelector('#field_user2');\r\n\r\n\t\t// e !== undefined - значит выстрел производит игрок\r\n\t\tif (e !== undefined) {\r\n\t\t\tif (this.state.curPlayer === 'user2') return;\r\n\t\t\tif (this.state.flotUser1.length === 0 || this.state.flotUser2.length === 0)\treturn;\r\n\r\n\t\t\t// преобразуем координаты выстрела (положения курсора) в координаты матрицы\r\n\t\t\tcoords = self.transformCoordinates(e);\r\n\r\n\t\t\tmatrixEnemy = this.state.matrixUser2;\r\n\t\t\tflotEnemy = this.state.flotUser2;\r\n\t\t} else {\r\n\t\t\t// получаем координаты для выстрела компьютера\r\n\t\t\tcoords = self.getCoordinatesShot();\r\n\r\n\t\t\tmatrixEnemy = this.state.matrixUser1;\r\n\t\t\tflotEnemy = this.state.flotUser1;\r\n\t\t}\r\n\t\t\r\n\t\t// значение матрицы по полученным координатам\r\n\t\tlet val = matrixEnemy[coords.x][coords.y];\r\n\r\n\t\tswitch(val) {\r\n\t\t\t// промах\r\n\t\t\tcase 0:\r\n\t\t\t\t// ставим точку и записываем промах в матрицу\r\n\t\t\t\tself.showIcons(this.state.curEnemy, coords, 'dot');\r\n\t\t\t\tmatrixEnemy[coords.x][coords.y] = 3;\r\n\r\n\t\t\t\ttext = (this.state.curPlayer === 'user1') ? 'Вы промахнулись. Стреляет компьютер.' : 'Компьютер промахнулся. Ваш выстрел.';\r\n\t\t\t\tself.showServiseText(text);\r\n\r\n\t\t\t\tlet curPlayerName = (this.state.curPlayer === 'user1') ? 'user2' : 'user1';\r\n\t\t\t\tlet curEnemyName = (this.state.curEnemy === 'user1') ? 'user2' : 'user1';\r\n\t\t\t\tawait this.setState({\r\n\t\t\t\t\tcurPlayer: curPlayerName,\r\n\t\t\t\t\tcurEnemy: curEnemyName\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (this.state.curPlayer === 'user2') {\r\n\t\t\t\t\tif (this.state.compShootMatrixAround.length === 0) {\r\n\t\t\t\t\t\tself.resetTempShip();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\treturn self.shoot();\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t// попадание\r\n\t\t\tcase 1:\r\n\t\t\t\tself.showIcons(this.state.curEnemy, coords, 'red-cross');\r\n\t\t\t\tmatrixEnemy[coords.x][coords.y] = 4;\r\n\r\n\t\t\t\ttext = (this.state.curPlayer === 'user1') ? 'Поздравляем! Вы попали. Ваш выстрел.' : 'Компьютер попал в ваш корабль. Выстрел компьютера';\r\n\t\t\t\tself.showServiseText(text);\r\n\t\t\t\t\r\n\t\t\t\tfor (let i = flotEnemy.length - 1; i >= 0; i--) {\r\n\t\t\t\t\tlet warship = flotEnemy[i], \r\n\t\t\t\t\t\t\tarrayDescks = warship.state.shipMatrix;\r\n\r\n\t\t\t\t\tfor (let j = 0, length = arrayDescks.length; j < length; j++) {\r\n\t\t\t\t\t\tif (arrayDescks[j][0] === coords.x && arrayDescks[j][1] === coords.y) {\r\n\t\t\t\t\t\t\twarship.state.hits++;\r\n\r\n\t\t\t\t\t\t\tif (warship.state.hits === warship.state.decks) {\r\n\t\t\t\t\t\t\t\tif (this.state.curPlayer === 'user2') {\r\n\t\t\t\t\t\t\t\t\tthis.state.compTempShip.x0 = warship.state.x;\r\n\t\t\t\t\t\t\t\t\tthis.state.compTempShip.y0 = warship.state.y;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tflotEnemy.splice(i, 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (flotEnemy.length === 0) {\r\n\t\t\t\t\t// конец игры\t\t\t\t\t\r\n\t\t\t\t\ttext = (this.state.curPlayer === 'user1') ? 'Поздравляем! Вы выиграли.' : 'К сожалению, вы проиграли.';\r\n\t\t\t\t\t\r\n\t\t\t\t\tuserfield2.removeEventListener('click', self.shoot.bind(this) );\r\n\t\t\t\t\t\r\n\t\t\t\t\t//// заменить на смену состояния и очистку поля\r\n\t\t\t\t\tself.showServiseText(text + ' <a id=\"one_more_time\" href=\"#\" >Ещё раз!</a>');\r\n\r\n\t\t\t\t\t// сброс состояния игры, запуск новой\r\n\t\t\t\t\tdocument.querySelector('#one_more_time').addEventListener('click', () => {\r\n\t\t\t\t\t\tthis.props.setAppState('', 'start', false);\r\n\t\t\t\t\t\tthis.props.setAppState('', 'gameStarted', false);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tdocument.querySelector('#control_btns').setAttribute('data-hidden', false);\r\n\t\t\t\t\t\tthis.showServiseText('');\r\n\t\t\t\t\t\tlet field2 = document.querySelector('#field_user2');\r\n\t\t\t\t\t\twhile (field2.firstChild) {\r\n\t\t\t\t\t\t\tfield2.removeChild(field2.firstChild);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// бой продолжается\r\n\t\t\t\t\tif (this.state.curPlayer === 'user2') {\r\n\t\t\t\t\t\tthis.state.compTempShip.totalHits++;\r\n\t\t\t\t\t\tlet points\t= [\r\n\t\t\t\t\t\t\t[coords.x - 1, coords.y - 1],\r\n\t\t\t\t\t\t\t[coords.x - 1, coords.y + 1],\r\n\t\t\t\t\t\t\t[coords.x + 1, coords.y - 1],\r\n\t\t\t\t\t\t\t[coords.x + 1, coords.y + 1]\r\n\t\t\t\t\t\t];\r\n\t\t\t\t\t\tself.markEmptyCell(points);\r\n\r\n\t\t\t\t\t\tlet max = self.checkMaxDecks();\r\n\r\n\t\t\t\t\t\tif (this.state.compTempShip.totalHits >= max) {\r\n\t\t\t\t\t\t\tif (this.state.compTempShip.totalHits === 1) {\r\n\t\t\t\t\t\t\t\tpoints = [\r\n\t\t\t\t\t\t\t\t\t[this.state.compTempShip.x0 - 1, this.state.compTempShip.y0],\r\n\t\t\t\t\t\t\t\t\t[this.state.compTempShip.x0 + 1, this.state.compTempShip.y0],\r\n\t\t\t\t\t\t\t\t\t[this.state.compTempShip.x0, this.state.compTempShip.y0 - 1],\r\n\t\t\t\t\t\t\t\t\t[this.state.compTempShip.x0, this.state.compTempShip.y0 + 1],\r\n\t\t\t\t\t\t\t\t];\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tlet x1 = this.state.compTempShip.x0 - this.state.compTempShip.dirx,\r\n\t\t\t\t\t\t\t\t\t\ty1 = this.state.compTempShip.y0 - this.state.compTempShip.diry,\r\n\t\t\t\t\t\t\t\t\t\tx2 = this.state.compTempShip.x0 + this.state.compTempShip.dirx * this.state.compTempShip.totalHits,\r\n\t\t\t\t\t\t\t\t\t\ty2 = this.state.compTempShip.y0 + this.state.compTempShip.diry * this.state.compTempShip.totalHits;\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tpoints = [\r\n\t\t\t\t\t\t\t\t\t[x1, y1],\r\n\t\t\t\t\t\t\t\t\t[x2, y2]\r\n\t\t\t\t\t\t\t\t];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tself.resetTempShip();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tself.setShootMatrixAround();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\treturn self.shoot();\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\t// do nothing\r\n\t\t}\r\n\t}\r\n\r\n\tshowIcons = function(enemy, coords, iconClass) {\r\n\t\tlet fname = (enemy === 'user1') ? '#field_user1' : '#field_user2';\r\n\t\tlet field = document.querySelector(fname);\r\n\t\tlet div = document.createElement('div');\r\n\t\tdiv.className = 'icon-field ' + iconClass;\r\n\t\tdiv.style.cssText = `left: ${coords.y * this.props.shipSize}px; \r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttop: ${coords.x * this.props.shipSize}px;`;\r\n\t\tfield.appendChild(div);\r\n\t}\r\n\r\n\tsetShootMatrix = function() {\r\n\t\tfor (let i = 0; i < 10; i++) {\r\n\t\t\tfor(let j = 0; j < 10; j++) {\r\n\t\t\t\tthis.state.compShootMatrix.push([i, j]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (let i = 0, length = this.state.compStartPoints.length; i < length; i++) {\r\n\t\t\tlet arr = this.state.compStartPoints[i];\r\n\t\t\tfor (let j = 0, lh = arr.length; j < lh; j++) {\r\n\t\t\t\tlet x = arr[j][0],\r\n\t\t\t\t\t\ty = arr[j][1];\r\n\r\n\t\t\t\tswitch(i) {\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\twhile(x <= 9 && y <= 9) {\r\n\t\t\t\t\t\t\tthis.state.compShootMatrixAI.push([x,y]);\r\n\t\t\t\t\t\t\tx = (x <= 9) ? x : 9;\r\n\t\t\t\t\t\t\ty = (y <= 9) ? y : 9;\r\n\t\t\t\t\t\t\tx++; y++;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\twhile(x >= 0 && x <= 9 && y <= 9) {\r\n\t\t\t\t\t\t\tthis.state.compShootMatrixAI.push([x,y]);\r\n\t\t\t\t\t\t\tx = (x >= 0 && x <= 9) ? x : (x < 0) ? 0 : 9;\r\n\t\t\t\t\t\t\ty = (y <= 9) ? y : 9;\r\n\t\t\t\t\t\t\tx--; y++;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t// do nothing\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction compareRandom(a, b) {\r\n\t\t\treturn Math.random() - 0.5;\r\n\t\t}\r\n\t\tthis.state.compShootMatrix.sort(compareRandom);\r\n\t\tthis.state.compShootMatrixAI.sort(compareRandom);\r\n\t\treturn;\r\n\t}\r\n\r\n\tgetCoordinatesShot = function() {\r\n\t\tif (this.state.compShootMatrixAround.length > 0) {\r\n\t\t\tlet coordsState = this.state.compShootMatrixAround.pop();\r\n\t\t\tthis.setState({coords: coordsState});\r\n\r\n\t\t} else if (this.state.compShootMatrixAI.length > 0) {\r\n\t\t\tlet coordsState = this.state.compShootMatrixAI.pop();\r\n\t\t\tthis.setState({coords: coordsState});\r\n\r\n\t\t} else {\r\n\t\t\tlet coordsState = this.state.compShootMatrix.pop();\r\n\t\t\tthis.setState({coords: coordsState});\r\n\t\t}\r\n\r\n\t\tlet obj = {\r\n\t\t\tx: this.state.coords[0],\r\n\t\t\ty: this.state.coords[1]\r\n\t\t};\r\n\r\n\t\tif (this.state.compShootMatrixAI.length !== 0) {\r\n\t\t\tself.deleteElementMatrix(this.state.compShootMatrixAI, obj);\r\n\t\t}\r\n\t\tself.deleteElementMatrix(this.state.compShootMatrix, obj);\r\n\r\n\t\treturn obj;\r\n\t}\r\n\r\n\tsetShootMatrixAround() {\r\n\t\tconst {compTempShip, coords, compShootMatrixAround, compShootMatrix, matrixUser1} = this.state;\r\n\t\t\r\n\t\t// тут coords.x - coords[0], coords.y - coords[1]\r\n\t\tif (compTempShip.dirx === 0 && compTempShip.diry === 0) {\r\n\t\t\tif (Object.keys(compTempShip.firstHit).length === 0) {\r\n\t\t\t\tlet tempShipFirstHit = coords;\r\n\t\t\t\tthis.setState((prevState) => {prevState.compTempShip.firstHit = tempShipFirstHit});\r\n\t\t\t} else {\r\n\t\t\t\tlet tempShipNextHit, tempShipDirx, tempShipDiry;\r\n\t\t\t\ttempShipNextHit = coords;\r\n\t\t\t\ttempShipDirx = (Math.abs(compTempShip.firstHit[0] - compTempShip.nextHit[0]) === 1) ? 1 : 0;\r\n\t\t\t\ttempShipDiry = (Math.abs(compTempShip.firstHit[1] - compTempShip.nextHit[1]) === 1) ? 1 : 0;\r\n\t\t\t\t\r\n\t\t\t\tthis.setState((prevState) => {prevState.compTempShip.nextHit = tempShipNextHit});\r\n\t\t\t\tthis.setState((prevState) => {prevState.compTempShip.dirx = tempShipDirx});\r\n\t\t\t\tthis.setState((prevState) => {prevState.compTempShip.diry = tempShipDiry});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// корабль вертикально\r\n\t\tif (coords[0] > 0 && compTempShip.diry === 0) this.state.compShootMatrixAround.push([coords[0] - 1, coords[1]]);\r\n\t\tif (coords[0] < 9 && compTempShip.diry === 0) this.state.compShootMatrixAround.push([coords[0] + 1, coords[1]]);\r\n\t\t// корабль горизонтально\r\n\t\tif (coords[1] > 0 && compTempShip.dirx === 0) this.state.compShootMatrixAround.push([coords[0], coords[1] - 1]);\r\n\t\tif (coords[1] < 9 && compTempShip.dirx === 0) this.state.compShootMatrixAround.push([coords[0], coords[1] + 1]);\r\n\r\n\t\t// проверить их валидность\r\n\t\tfor (let i = compShootMatrixAround.length - 1; i >= 0; i--) {\r\n\t\t\t// координаты возможного выстрела\r\n\t\t\tlet x = compShootMatrixAround[i][0],\r\n\t\t\t\t\ty = compShootMatrixAround[i][1];\r\n\t\t\t\r\n\t\t\tif (matrixUser1[x][y] !== 0 && matrixUser1[x][y] !== 1) {\r\n\t\t\t\tcompShootMatrixAround.splice(i,1);\r\n\t\t\t\tself.deleteElementMatrix(compShootMatrix, coords);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (compShootMatrixAround.length === 0) {\r\n\t\t\t// корабль потоплен\r\n\t\t\tself.resetTempShip();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tdeleteElementMatrix = function(array, obj) {    \r\n\t\tfor (let i = 0; i < array.length; i++) {\r\n\t\t\t// удаляем ячейку с координатой выстрела\r\n\t\t\tif (array[i][0] === obj.x && array[i][1] === obj.y) {\r\n\t\t\t\tarray.splice(i, 1);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tresetTempShip = function() {\r\n\t\t// обнуляем массив с координатами обстрела клеток вокруг попадания\r\n\t\tthis.setState({compShootMatrixAround: []});\r\n\t\t// количество попаданий в корабль\r\n\t\tthis.setState((prevState) => {prevState.compTempShip.totalHits = 0 });\r\n\t\t// объекты для хранения координат первого и второго попадания\r\n\t\tthis.setState((prevState) => {prevState.compTempShip.firstHit = {} });\r\n\t\tthis.setState((prevState) => {prevState.compTempShip.nextHit = {} });\r\n\t\t// значения для вычисления координат обстрела \"раненого\" корабля\r\n\t\tthis.setState((prevState) => {prevState.compTempShip.dirx = 0 });\r\n\t\tthis.setState((prevState) => {prevState.compTempShip.diry = 0 });\r\n\t}\r\n\r\n\tcheckMaxDecks = function() {\r\n\t\tlet arr = [];\r\n\t\tlet flotUser1 = this.state.flotUser1;\r\n\t\tlet length = flotUser1.length;\r\n\r\n\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t// записываем в массив кол-во палуб у оставшихся кораблей\r\n\t\t\tarr.push(flotUser1[i].state.decks);\r\n\t\t}\r\n\t\t\r\n\t\treturn Math.max.apply(null, arr);\r\n\t}\r\n\r\n\tmarkEmptyCell = function(points) {\r\n\t\tconst {matrixUser1, compShootMatrix, compShootMatrixAround, compShootMatrixAI} = this.state;\r\n\t\tlet obj;\r\n\r\n\t\t// перебираем массив с координатами\r\n\t\tfor (let i = 0; i < points.length; i++) {\r\n\t\t\tobj = {\r\n\t\t\t\tx: points[i][0],\r\n\t\t\t\ty: points[i][1]\r\n\t\t\t};\r\n\t\t\t// если true хотя бы одно из условий, значит координата находится\r\n\t\t\t// за пределами игрового поля\r\n\t\t\tif (obj.x < 0 || obj.x > 9 || obj.y < 0 || obj.y > 9) continue;\r\n\t\t\t// в этом месте уже стоит отметка\r\n\t\t\tif (matrixUser1[obj.x][obj.y] !== 0) continue;\r\n\r\n\t\t\t// значение '2' = пустой клетке\r\n\t\t\tmatrixUser1[obj.x][obj.y] = 2;\r\n\r\n\t\t\t// удаляем координаты, чтобы исключить их обстрел\r\n\t\t\tself.deleteElementMatrix(compShootMatrix, obj);\r\n\t\t\tif (compShootMatrixAround.length !== 0) {\r\n\t\t\t\tself.deleteElementMatrix(compShootMatrixAround, obj);\r\n\t\t\t}\r\n\t\t\tif (compShootMatrixAI.length !== 0) {\r\n\t\t\t\tself.deleteElementMatrix(compShootMatrixAI, obj);\r\n\t\t\t}\r\n\t\t\tself.deleteElementMatrix(compShootMatrix, obj);\r\n\t\t}\r\n\t}\r\n\r\n\ttransformCoordinates = function(e) {\r\n\t\ttry {\r\n\t\t\tlet obj = {};\r\n\r\n\t\t\tobj.x = Math.trunc((e.pageY - this.props.fieldXUser2) / this.props.shipSize);\r\n\t\t\tobj.y = Math.trunc((e.pageX - this.props.fieldYUser2) / this.props.shipSize);\r\n\t\t\t\r\n\t\t\treturn obj;\r\n\t\t} catch(err) {\r\n\t\t\tconsole.error(err);\r\n\t\t}\r\n\t}\r\n\r\n\tshowServiseText(text) {\r\n\t\tlet srvText = document.getElementById('text_btm');\r\n\t\tsrvText.innerHTML = text;\r\n\t\t// setTimeout(\"srvText.innerHTML = ''\", 1000);\r\n\t}\r\n\t\r\n\tgetRandom(n) {\r\n\t\treturn Math.floor(Math.random() * (n + 1));\r\n\t}\r\n\t\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\tif (this.props.start === true && this.props.gameStarted === false) {\r\n\t\t\tthis.init();\r\n\t\t}\r\n\r\n\t\tif (this.props.matrixUser1 !== prevProps.matrixUser1) {\r\n\t\t\tthis.setState({matrixUser1: this.props.matrixUser1});\r\n\t\t}\r\n\t\tif (this.props.matrixUser2 !== prevProps.matrixUser2) {\r\n\t\t\tthis.setState({matrixUser2: this.props.matrixUser2});\r\n\t\t}\r\n\t\tif (this.props.flotUser1 !== prevProps.flotUser1) {\r\n\t\t\tthis.setState({flotUser1: this.props.flotUser1});\r\n\t\t}\r\n\t\tif (this.props.flotUser1 !== prevProps.flotUser1) {\r\n\t\t\tthis.setState({flotUser1: this.props.flotUser1});\r\n\t\t}\r\n\t}\r\n\t\r\n\trender() {\r\n\t\treturn <></>;\r\n\t}\r\n}\r\n","import React, {Component} from 'react'\r\nimport Controller from './Controller'\r\n\r\nexport default class StartGame extends Component {\r\n\r\n\tplayClick = () => {\r\n    try {\r\n      let controlBtns = document.querySelectorAll('.control-btns');\r\n      for (let btn of controlBtns) {\r\n        btn.setAttribute('data-hidden', true);\r\n      }\r\n      // кидаем флаг запуска игры\r\n      this.props.setStart();\r\n    } catch(err) {\r\n      console.error(err);\r\n    }\r\n  }\r\n  \r\n\r\n  render() {\r\n    const {start, gameStarted, \r\n            matrixUser1, flotUser1, \r\n            matrixUser2, fieldXUser2, fieldYUser2, flotUser2, \r\n            fieldSize, shipSize, \r\n            setAppState, setGameStarted} = this.props;\r\n    \r\n    return (\r\n      <div className=\"control-btns start-btn\" data-hidden=\"false\">\r\n        <span id=\"play\" className=\"btn-play\" data-hidden=\"true\" onClick={this.playClick}>Играть</span>\r\n\r\n        <Controller matrixUser1={matrixUser1}\r\n                    matrixUser2={matrixUser2}\r\n                    fieldXUser2={fieldXUser2}\r\n                    fieldYUser2={fieldYUser2}\r\n                    flotUser1={flotUser1}\r\n                    flotUser2={flotUser2}\r\n                    fieldSize={fieldSize}\r\n                    shipSize={shipSize}\r\n                    start={start}\r\n                    gameStarted={gameStarted}\r\n                    setAppState={setAppState}\r\n                    setGameStarted={setGameStarted} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, {Component} from 'react'\r\n\r\nexport default class Rules extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"ruls\">\r\n        <p>\r\n          Как играть: <br/>\r\n          1. Сгенерировать корабли на поле по кнопке \"Расставить корабли\"<br/>\r\n          2. Начать играть по кнопке \"Играть\"<br/>\r\n          3. Уничтожить все корабли игрока 2\r\n        </p>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React, {Component} from 'react'\r\n\r\nexport default class PopupName extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    \r\n    this.state = {\r\n      value: ''\r\n    };\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n\r\n  handleChange(event) {\r\n    event.preventDefault();\r\n    this.setState({value: event.target.value});\r\n  }\r\n  \r\n  handleSubmit(event) {\r\n    event.preventDefault();\r\n    if (this.state.value !== '') this.props.setAppState('user1', 'playerName', this.state.value);\r\n    document.querySelector('#popup').setAttribute('data-hidden', true);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"popup\" className=\"popup\" data-hidden=\"false\">\r\n        <div className=\"popup-wrap\">\r\n          <h3>Введите имя игрока 1</h3>\r\n          <form action=\"post\" onSubmit={this.handleChange}>\r\n            <input id=\"popup_txt\" type=\"text\" placeholder=\"\" onChange={this.handleChange} value={this.state.value} />\r\n            <input id=\"popup_submit\" type=\"button\" value=\"OK\" onClick={this.handleSubmit} />\r\n          </form>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}","import React, {Component} from 'react'\r\nimport './fonts/SegoePrint/fonts.css'\r\nimport './style.css'\r\nimport Field from './Field/'\r\nimport StartGame from './StartGame'\r\nimport Rules from './Rules'\r\nimport PopupName from './PopupName'\r\n\r\nexport default class App extends Component {\r\n  state = {\r\n    start: false,\r\n    gameStarted: false,\r\n    fieldSize: 330,\r\n    shipSize: 33,\r\n    user1name: \"user1\",\r\n    user1id: \"1\",\r\n    user1playerName: \"Юзер\",\r\n    user1matrix: null,\r\n    user1fieldX: null,\r\n    user1fieldY: null,\r\n    user1fieldRight: null,\r\n    user1fieldBtm: null,\r\n    user1flot: [],\r\n    user2name: \"user2\",\r\n    user2id: \"2\",\r\n    user2playerName: \"Комп\",\r\n    user2matrix: null,\r\n    user2fieldX: null,\r\n    user2fieldY: null,\r\n    user2fieldRight: null,\r\n    user2fieldBtm: null,\r\n    user2flot: []\r\n  }\r\n  \r\n  // флаги запуска игры\r\n  setStart = () => {\r\n    try {\r\n      if (this.state.start === false) this.setState({start: true});\r\n    } catch(err) {\r\n      console.error(err);\r\n    }\r\n  }\r\n\r\n  setGameStarted = () => {\r\n    try {\r\n      if (this.state.gameStarted === false) this.setState({gameStarted: true});\r\n    } catch(err) {\r\n      console.error(err);\r\n    }\r\n  }\r\n  \r\n\tsetAppState = (username, param, data) => {\r\n    try {\r\n      let userState = username + param;\r\n\r\n      this.setState({\r\n        [userState]: data\r\n      });\r\n    } catch(err) {\r\n      console.error(err);\r\n    }\r\n  }\r\n\r\n\tsetUserPos = (username, fieldX, fieldY, fieldRight, fieldBtm) => {\r\n    try {\r\n      if (username === 'user2') {\r\n        this.setState({\r\n          user2fieldX: fieldX,\r\n          user2fieldY: fieldY,\r\n          user2fieldRight: fieldRight,\r\n          user2fieldBtm: fieldBtm\r\n        });\r\n      }\r\n    } catch(err) {\r\n      console.error(err);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    // console.log('this.state', this.state);\r\n    const {start, gameStarted,\r\n            user1name, user1id, user1playerName, user1matrix, user1flot,\r\n            user2name, user2id, user2playerName, user2matrix, user2fieldX, user2fieldY, user2flot,\r\n            fieldSize, shipSize} = this.state;\r\n\r\n    return (\r\n      <div className=\"wrap\">\r\n        <h3 id=\"text_top\" className=\"text-top\">Игра \"Морской бой\"</h3>\r\n        <div className=\"field-wrap\">\r\n          <Field  user={user1name} \r\n                  playerNum={user1id} \r\n                  playerName={user1playerName} \r\n                  flot={user1flot}\r\n                  fieldSize={fieldSize}\r\n                  shipSize={shipSize}\r\n                  setAppState={this.setAppState}\r\n                  setUserPos={this.setUserPos} />\r\n\r\n          <Field  user={user2name} \r\n                  playerNum={user2id} \r\n                  playerName={user2playerName} \r\n                  flot={user2flot}\r\n                  fieldSize={fieldSize}\r\n                  shipSize={shipSize}\r\n                  setAppState={this.setAppState}\r\n                  setUserPos={this.setUserPos}\r\n                  start={start}\r\n                  gameStarted={gameStarted} />\r\n        </div>\r\n        \r\n        <StartGame  matrixUser1={user1matrix} \r\n                    matrixUser2={user2matrix}\r\n                    fieldXUser2={user2fieldX}\r\n                    fieldYUser2={user2fieldY}\r\n                    flotUser1={user1flot}\r\n                    flotUser2={user2flot}\r\n                    fieldSize={fieldSize}\r\n                    shipSize={shipSize}\r\n                    start={start}\r\n                    gameStarted={gameStarted}\r\n                    setStart={this.setStart}\r\n                    setGameStarted={this.setGameStarted}\r\n                    setAppState={this.setAppState} />\r\n\r\n        <div id=\"text_btm\" className=\"text-btm\"></div>\r\n\r\n        <Rules/>\r\n        <PopupName setAppState={this.setAppState} />\r\n      </div>\r\n    )\r\n  }\r\n  \r\n}\r\n","import React from 'react'\r\nimport {render} from 'react-dom'\r\nimport App from './components/App'\r\n\r\n\r\nrender(<App/>, document.getElementById('root'))"],"sourceRoot":""}